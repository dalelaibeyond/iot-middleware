# V5008 Device Message Reference

Quick reference for V5008 IoT gateway message formats and topics.

## Message Types & Topics

| Type | Topic Pattern | Identifier |
|------|---------------|------------|
| Heartbeat | `V5008Upload/{device_id}/OpeAck` | `CB`/`CC` |
| RFID | `V5008Upload/{device_id}/LabelState` | `BB` |
| Temperature & Humidity | `V5008Upload/{device_id}/TemHum` | - |
| Noise | `V5008Upload/{device_id}/Noise` | - |
| Door | `V5008Upload/{device_id}/OpeAck` | `BA` |
| Device Info | `V5008Upload/{device_id}/OpeAck` | `EF01` |
| Module Info | `V5008Upload/{device_id}/OpeAck` | `EF02` |

## Message Formats

### Heartbeat (CB/CC)
```
[CB or CC] ([modAdd + modId(4B) + uNum] x 10) [msgCode(4B)]
```

### RFID (BB)
```
[BB][modAdd][modId(4B)][Reserved][uNum][rifdNum] ([uPos + uIfAlarm + uRFID(4B)] x rfidNum) [msgCode(4B)]
```

### Temperature & Humidity
```
[modAdd][modId(4B)] ([thAdd + temp(4B) + hum(4B)] x 6) [msgCode(4B)]
```

### Noise
```
[modAdd][modId(4B)] ([nsAdd + nsLevel(4B)] x 3) [msgCode(4B)]
```

### Door (BA)
```
[BA][modAdd][modId(4B)][drStatus] [msgCode(4B)]
```

### Device Info (EF01)
```
[EF][01][deviceType(2B)][firmwareVer(4B)][ip(4B)][mask(4B)][gateway(4B)][mac(6B)][msgCode(4B)]
```

### Module Info (EF02)
```
[EF][02] ([modAdd + modFirwareVer(6B)] x N) [msgCode(4B)]
```

## Common JSON Structure
```json
{
  "deviceId": "<device_id>",
  "deviceType": "V5008",
  "msgType": "<type>",
  "sensorType": "<sensor_type>",
  "modAdd": <module_address>,
  "modPort": <port>,
  "modId": "<module_id>",
  "ts": "<timestamp>",
  "payload": {...},
  "meta": {
    "rawTopic": "<original_topic>",
    "rawHexString": "<hex_data>"
  }
}
```

## Notes
- All raw messages are hex strings
- 1 byte = 2 hex characters
- Multi-byte values noted as (nB)
- Temperature/humidity values: integer.fraction format
- Valid module addresses: 1-5